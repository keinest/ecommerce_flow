{% extends 'base.html' %}
{% load static %}

{% block title %}Notifications — E-commerce Flow{% endblock %}

{% block extra_css %}
<style>
.notifs-page { max-width: 800px; margin: 2.5rem auto; padding: 0 1.25rem; }
.notifs-page h1 { font-family: 'Syne', sans-serif; font-size: 2rem; margin-bottom: 1.5rem; }
.notif-card {
    display: flex; align-items: flex-start; gap: 1rem;
    background: #fff; border: 1.5px solid #e2e8f0; border-radius: 12px;
    padding: 1rem 1.25rem; margin-bottom: .75rem;
    transition: box-shadow .2s;
}
.notif-card.unread { border-left: 4px solid #2563eb; background: #f0f6ff; }
.notif-icon {
    width: 42px; height: 42px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; font-size: 1.1rem;
}
.notif-icon.new_order     { background: #dbeafe; color: #2563eb; }
.notif-icon.order_shipped { background: #e0e7ff; color: #4338ca; }
.notif-icon.order_delivered { background: #dcfce7; color: #166534; }
.notif-icon.order_cancelled { background: #fee2e2; color: #991b1b; }
.notif-body { flex: 1; }
.notif-msg { font-size: .92rem; color: #1e293b; margin-bottom: .25rem; }
.notif-meta { font-size: .78rem; color: #94a3b8; }
.empty-state { text-align: center; padding: 4rem 2rem; color: #94a3b8; }
.empty-state i { font-size: 3rem; margin-bottom: 1rem; display: block; }
.empty-state h3 { color: #64748b; }
</style>
{% endblock %}

{% block content %}
<div class="notifs-page">
    <h1><i class="fas fa-bell" style="color:var(--primary, #2563eb);"></i> Notifications</h1>

    {% if notifs %}
        {% for notif in notifs %}
        <div class="notif-card {% if not notif.is_read %}unread{% endif %}">
            <div class="notif-icon {{ notif.notif_type }}">
                {% if notif.notif_type == 'new_order' %}<i class="fas fa-shopping-bag"></i>
                {% elif notif.notif_type == 'order_shipped' %}<i class="fas fa-truck"></i>
                {% elif notif.notif_type == 'order_delivered' %}<i class="fas fa-check-circle"></i>
                {% elif notif.notif_type == 'order_cancelled' %}<i class="fas fa-times-circle"></i>
                {% else %}<i class="fas fa-bell"></i>{% endif %}
            </div>
            <div class="notif-body">
                <div class="notif-msg">{{ notif.message }}</div>
                <div class="notif-meta">{{ notif.created_at|date:"d M Y à H:i" }}</div>
            </div>
        </div>
        {% endfor %}
    {% else %}
    <div class="empty-state">
        <i class="fas fa-bell-slash"></i>
        <h3>Aucune notification</h3>
        <p>Vous êtes à jour !</p>
    </div>
    {% endif %}
</div>
{% endblock %}
